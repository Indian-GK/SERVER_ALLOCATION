DROP TABLE RECORDS;
CREATE TABLE RECORDS (C_ID int NOT NULL, USER_TYPE tinyint NOT NULL, REQ_DATE varchar(12), REQUEST int, RESP_NUM int, RESPONSE enum('PENDING','APPROVED','REJECTED','FILLED_PARTIALLY'), APP_DATE varchar(12), R_ID int NOT NULL AUTO_INCREMENT, PRIMARY KEY (R_ID), INDEX FK_RECORDS_CLIENT (C_ID), INDEX FK_RECORDS_user (USER_TYPE), INDEX FK_table (RESPONSE)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 DEFAULT COLLATE=utf8mb4_0900_ai_ci;
DROP TABLE RESOURCES;
CREATE TABLE RESOURCES (R_NAME varchar(30) NOT NULL, R_CAPACITY int NOT NULL, R_VALUE int NOT NULL, USER_ID tinyint NOT NULL, INC_DATE varchar(12) NOT NULL, PRIMARY KEY (R_NAME), INDEX fk_USER (USER_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 DEFAULT COLLATE=utf8mb4_0900_ai_ci;
DROP TABLE RESOURCE_UPDATES;
CREATE TABLE RESOURCE_UPDATES (M_ID int NOT NULL AUTO_INCREMENT, M_DATE varchar(12) NOT NULL, M_TIME varchar(11) NOT NULL, MSG varchar(100) NOT NULL, PRIMARY KEY (M_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 DEFAULT COLLATE=utf8mb4_0900_ai_ci;
DROP TABLE SERVER_MANAGEMENT;
CREATE TABLE SERVER_MANAGEMENT (C_ID int NOT NULL AUTO_INCREMENT, C_NAME varchar(30) NOT NULL, C_PASSWORD varchar(50) NOT NULL, C_EMAIL varchar(60) NOT NULL, USER_ID tinyint NOT NULL, PRIMARY KEY (C_ID), INDEX FK_userId (USER_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 DEFAULT COLLATE=utf8mb4_0900_ai_ci;
DROP TABLE USER_TYPES;
CREATE TABLE USER_TYPES (USER_ID tinyint NOT NULL, USER_TYPE varchar(4), PRIMARY KEY (USER_ID)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 DEFAULT COLLATE=utf8mb4_0900_ai_ci;
ALTER TABLE `RECORDS` ADD CONSTRAINT FK_RECORDS_user FOREIGN KEY (`USER_TYPE`) REFERENCES `USER_TYPES` (`USER_ID`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `RESOURCES` ADD CONSTRAINT fk_USER FOREIGN KEY (`USER_ID`) REFERENCES `USER_TYPES` (`USER_ID`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `SERVER_MANAGEMENT` ADD CONSTRAINT FK_userId FOREIGN KEY (`USER_ID`) REFERENCES `USER_TYPES` (`USER_ID`) ON DELETE CASCADE ON UPDATE CASCADE;
